import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Welcome" />

# AÄ“sop Global Experience Language

## Tooling Requirements

- **Node** [https://nodejs.org/](https://nodejs.org/) (required version recorded in the [.nvmrc](.nvmrc) file)

## Tooling Suggestions

- **Homebrew** [https://brew.sh/](https://brew.sh/)
- **Node Version Manager** [https://github.com/nvm-sh/nvm](https://github.com/nvm-sh/nvm)

It is also recommended to install these plugins into your **IDE / Code Editor** of choice:

- Babel ([atom](https://atom.io/packages/language-babel))
- Base linter ([atom only](https://atom.io/packages/linter))
- Editor Config ([atom](https://atom.io/packages/editorconfig))
- ESLint ([atom](https://atom.io/packages/linter-eslint)) ([vscode](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint))
- Linter UI ([atom only](https://atom.io/packages/linter-ui-default))
- Prettier ([atom](https://atom.io/packages/prettier-atom))
  ([vscode](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode))
- StyleLint ([atom](https://atom.io/packages/linter-stylelint)) ([vscode](https://marketplace.visualstudio.com/items?itemName=shinnn.stylelint))

## Application Architecture

TBA

## Development

```
npm i && nvm use && npm run storybook
```

## Production

Rollup buils ES Modules for this project

```
npm run build:prod
```

## Git Workflow

This project adopts the [Gitflow Workflow](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow).

**feature** (or **update**, or **bugfix** where appropriate) branches are branched from **develop**, and are merged back into **develop** after an approved Pull Request.

A **release** branch is then cut from **develop** (so **develop** can continue receiving new features).

**hotfix** branches can be merged into **release** if they originate from **release**.

Finally, once the **release** branch has been handed over, **release** is rebased and merged back into **develop** and **master** respectively (along with any hotfixes).

**master** is always the updated stable version that truthfully represent production code.

## Testing

### Component Snapshots

To run Jest snapshots on all component files with a `.spec.js` file, run:

```
npm run test
```

To update existing snapshots for components where their markup changes, run:

```
npm run test -- -u
```

### UI and Design Testing

Story Book is used to Visually test and showcase components. Run the following to build the storybook files and serve them on `http://localhost:6006/?path=/story/*` respectively:

```
npm run build-storybook && npm run storybook
```

More on testing with the [Testing Readme](documentation/TESTING.md)

## Code Integrity

### Commenting

It is encouraged to write code that is [Self-documenting](https://en.wikipedia.org/wiki/Self-documenting_code), where as through functional programming, intelligent naming, and clearly laid out code intuitively describes what the code does.

In the event of more complex code, `@TODO` statements or tslint / eslint ignores, use double slash for single line comments that relate to a block of code. Slightly different for css:

```
// single line comment about the following code block
function add(a, b) {
  return a + b;
}

...

/* single line comment about the following code block */
.base {
  color: pink;
}
```

double slash for single line comments to the right of a single statement:

```
const add = (a, b) => a + b; // single line comment about this statement

...

.base {
  /* single line comment about this statement */
  color: pink;
}
```

and JSDoc format for multi line comments:

```
/**
 * multi line comment
 * about the following code block
 */
function add(a, b) {
  return a + b;
}

...

/**
 * multi line comment
 * about the following code block
 */
.base {
  color: pink;
}
```

### Linting

The [.eslintrc](.eslintrc) and [.stylelintrc](.stylelintrc) files govern the code style and syntax rules for JavaScript/TypeScript and CSS files respectively.

The ESLint configuration for this project extends upon the [Airbnb JavaScript style guide](https://github.com/airbnb/javascript).

To run the ESLint task, use:

```
npm run eslint
```

To run the StyleLint task, use:

```
npm run stylelint
```

`npm run lint` is an alias for both.

In regards to typing React components, use [React+TypeScript Cheatsheets](https://github.com/sw-yx/react-typescript-cheatsheet) as a reference. (Thank you @kevin-ho87)

### Prettier

[Prettier](https://github.com/prettier/prettier) is used to maintain code style within the application. The changes to the base Prettier config for this application are configured in the [`.prettierrc`](.prettierrc) file. Use the following task to format CSS and JavaScript files.

```
npm run pretty
```

`npm run prettier-eslint` and `npm run prettier-stylelint` will independently run the relevant format task for JavaScript and CSS respectively.

### Pre Commit Hook

[Husky](https://github.com/typicode/husky) is used to automatically run `npm run format` as a pre-commit hook, ensuring changes to
source files follow the same formatting. The configurations of Husky is found in [.huskyrc](.huskyrc).

.huskyrc

```
{
  "hooks": {
    "pre-commit": "npm run pretty",
  }
}

```

### Issues

Code issues, update requests and development improvements that do not have a JIRA ticket should be made via an [issue submission](https://github.com/aesop/aesop-gel/issues).

Any `@TODO`s in the code base should have a corresponding issue submission.

### Contributing

Pull Requests for any new feature, bug fix or update need to be made with the PR template provided via a [New Pull Request](https://github.com/aesop/aesop-gel/pulls). Every PR needs to be Peer Reviewed before it can be merged.
